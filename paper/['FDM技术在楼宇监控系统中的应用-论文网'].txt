['论文导读：采用FDM技术。如果把MCU发出的控制信号调制到20Hz――20KHz范围以外。经过载波解调电路。调制，FDM技术在楼宇监控系统中的应用。', '\r\n关键词：FDM，调制，解调', '\r\n', '\r\n\xa0', '\r\n', '\xa0', '\r\n', '\r\n    ', '\r\n        ', '\r\n            ', '\xa0', '\r\n        ', '\r\n        ', '\r\n            ', '\xa0', '\r\n            ', '\r\n        ', '\r\n    ', '\r\n', '\r\n', '随着人民生活水平的提高和安全意识的不断增强，民用监控系统已成为新建居民小区的必备配套设施。这些监控系统虽多种多样，但原理上大都是采用MCU以互连方式实现的，大楼入口处的MCU是主机，用户家中的MCU是从机，两者之间按照图一的连接方式通讯。', '\r\n', '从图中可知，监控系统需要四根导线来分别传输语音信号和控制信号，安装这么多导线，不仅增加了工程的造价，延长了施工的周期，还增加事故隐患发生的几率。本文所介绍的监控系统，采用FDM技术，仅需要一根连线就实现了语音信号和控制信号的传输，不仅降低了成本，缩短了施工周期，而且大大降低系统发生故障的风险。', '\r\n', '1 FDM技术', '\r\n', '所谓频分复用（Frequency-division Multiplexing，FDM）是指按照频率的不同来复用多路信号的方法。在频分复用中，信道的带宽被分成若干个相互不重叠的频段，每路信号占用其中一个频段，因而在接收端可以采用适当的带通滤波器将多路信号分开，从而恢复出所需要的信号。', '\r\n', '众所周知，人的语音信号频率范围在20Hz――20KHz，如果把MCU发出的控制信号调制到20Hz――20KHz范围以外，就可以实现在一根导线上同时传输语音信号和控制信号的功能。', '\r\n', '2系统的原理框图与硬件设计', '\r\n', '系统的组成原理如图2所示，主机的控制信号经FSK调制电路调制后，与语音信号叠加，再通过载波调制电路，送往导线。调制的信号传送到接受端，经过载波解调电路，解调出语音信号和调制的控制信号，其中语音信号经过低通滤波送往用户机的音频功放电路。而调制的控制信号再通过FSK解调电路还原为原始的控制信号。', '\r\n', '2.1 FSK调制频率生成电路', '\r\n', '图3是FSK调制频率生成电路原理图。此电路产生将控制信号调制到20Hz――20KHz范围以外的载频。如图所示，振荡器产生频率为24K的载频信号，表示逻辑“1”，此载频信号再经过7490分频，产生频率为12K的载频信号，表示逻辑“0”。这样从MCU的TXD端口发出的数字控制信号为逻辑“1”的时候，电路接通24K的载频频率；反之，发出的数字控制信号为逻辑“0”的时候，电路接通12K的载频频率。从而实现了控制信号的频率搬移功能。', '\r\n', '\xa0', '\r\n', '\r\n    ', '\r\n        ', '\r\n            ', '图3 FSK调制频率生成电路', '\r\n        ', '\r\n    ', '\r\n', '\r\n', '\r\n', '2.2 载波调制电路', '\r\n', '\xa0', '\r\n', '\r\n    ', '\r\n        ', '\r\n            ', '\xa0', '\r\n        ', '\r\n        ', '\r\n            ', '\xa0', '\r\n            ', '\r\n        ', '\r\n    ', '\r\n', '\r\n', '\r\n', '图4是载波调制发射电路图。其核心采用了锁相环LM567芯片。LM567具有调制和解调的双重功能，此处采用的是调制功能，音频信号和经FSK调制的控制信号直接叠加后送入锁相环LM567的第2脚，通过锁相环LM567调制为高频信号后从第5脚输出。经高频小信号放大电路调谐放大，由耦合电容送入导线传送。', '\r\n', '通过调节锁相环LM567的5、6引脚间外接的定时元件', '，可以获得在0.01Hz～500KHz范围内连续变化的振荡输出频率。输出的振荡频率满足关系式：', '\r\n', '\r\n', '经反复测试，最后将本系统的调制频率选择为160kHz。在这个频率上，传输距离最远。论文写作，调制。而高于此频率，传输衰减增大，低于此频率，抗干扰能力下降。', '\r\n', '2.3载波解调电路', '\r\n', '由导线传送来的信号经耦合电容和变压器组成的高频滤波环路、再经LC并联谐振回路选频之后，送入锁相环LM567。论文写作，调制。这里采用了LM567的解调功能。高频载波信号从锁相环LM567的第3脚输入，如果载波信号的频率与LM567的中心频率相同，则对此信号进行解调，解调后的低频混叠信号分别从LM567的第1脚和第8脚输出。其中，混叠信号从第1脚输出后经过低通滤波送往音频功放电路，推动喇叭发声。', '\r\n', '\r\n', '\xa0', '\r\n', '\r\n    ', '\r\n        ', '\r\n            ', '\xa0', '\r\n        ', '\r\n        ', '\r\n            ', '\xa0', '\r\n            ', '\r\n        ', '\r\n    ', '\r\n', '\r\n', '2.4 控制信号的FSK解调电路', '\r\n', '控制信号的FSK解调电路再次应用了LM567的解调功能。通过调节LM567的阻容定时元件,可将LM567的中心频率锁定在24KHz。如果输入信号的频率与24KHz相同，输出就是“1”，反之，输出就是“0”。这样就从混叠信号中将原始的控制信号解调出来，送往用户机MCU的RXD端口。', '\r\n', '3 系统的软件设计', '\r\n', '由于只用一根导线传输，新系统可采用比当前流行的楼宇监控系统所采用的主从通信方式更灵活的多主通信方式。不仅门口机和用户机之间，而且用户机与用户机之间，门口机和门口机之间也能实现双向通讯。论文写作，调制。', '\r\n', '3.1系统通信协议的设计', '\r\n', '\xa0', '\r\n', '\r\n    ', '\r\n        ', '\r\n            ', '\xa0', '\r\n        ', '\r\n        ', '\r\n            ', '\xa0', '\r\n            ', '\r\n        ', '\r\n    ', '\r\n', '\r\n', '为实现载波通信的顺利进行，发送控制信息的数据格式以帧为单位，其格式如下：', '\r\n', '每帧以0XF7为帧头，0XEB为帧尾。由于系统采用多主通信方式，所以发送的每帧数据中需要有本机地址和目标地址，以备接收方回送数据。命令码是接收方进行操作的依据。校验码采用CRC校验方式，此码用于数据传输的接收方对所接收到的数据的正确性进行判断。', '\r\n', '3.2 通信的软件实现', '\r\n', '平时各个MCU均处于接收状态。论文写作，调制。如果接收到0XF7，就置导线忙标志为“1”，然后根据目标地址码判断此数据信息是否是发给本机的并做相应的处理。论文写作，调制。如果接收到0XEB，就置导线忙标志为“0”。当某个MCU发送数据时，首先检测导线忙标志位，如果是“0”，说明导线处于空闲状态，则发送信号；如果是“1”，说明导线处于繁忙状态，则转入延时等待模式，直到导线忙标志变为“0”。', '\r\n', '各接收模块接收到发给自己的信息后，首先判断传输的信息是否错误。如果接收方经校验后判断命令传输正确，则回送一个表示成功传输的响应码0FH，并执行相应的命令控制操作；如果接收方经校验后判断信号传输错误，则回送一个表示错误传输的响应码00H，并要求发送方重发。如果发送方在规定的时间内没能收到回送码或者收到传输错误的回送码，根据容错原则，都要重发一次控制信息码，若再次发送失败，就转入出错处理程序，发出警报，提示用户进行相关处理。', '\r\n', '\r\n', '图7 发送程序流程图', '\r\n', '\r\n', '图8 接收程序流程图', '\r\n', '通讯收发子程序框图如图7，8所示。限于篇幅，具体的程序在此不进行赘述。论文写作，调制。', '\r\n', '4 结论', '\r\n', '本文介绍的利用FDM技术实现的楼宇监控系统，仅用一根导线就完成了原系统需要四根导线才能完成的功能，具有布线少，安装方便，性能稳定，成本低廉的特点，在大力倡导“节约型”社会的今天，具有良好的推广普及前景。', '\r\n', '\r\n参考文献', '\r\n[1]刘国林.建筑物自动化系统[M].北京:机械工业出版社,2002。', '\r\n[2]孙建军,吴太虎.导线通信(PLC)技术的发展[J].自动化与仪器仪表,2003,5:1-3.', '\r\n\xa0', '\r\n', '\xa0']